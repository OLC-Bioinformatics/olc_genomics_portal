language: python
python:
  - '3.7'
dist: xenial
sudo: required
services:
- docker
before_script:
- sudo apt-get update && sudo apt install -y python3-cffi libcairo2 libpango-1.0-0 libpangocairo-1.0-0 libgdk-pixbuf2.0-0 libffi-dev shared-mime-info && pip install weasyprint && pip install --no-cache-dir --force-reinstall cffi && pip install --no-cache-dir cairocffi
- wget https://github.com/mozilla/geckodriver/releases/download/v0.24.0/geckodriver-v0.24.0-linux64.tar.gz
  && tar xf geckodriver-v0.24.0-linux64.tar.gz
script:
- docker-compose -f docker-compose-test.yml build
- docker-compose -f docker-compose-test.yml run web /bin/bash -c "sleep 20 && (Xvfb :99 &) &&
  export DISPLAY=:99 && python3 manage.py test --no-input"
env:
  global:
  - secure: AIetSzn7fj0Hf4nwvscCZ1N94FTvmBusGML+zEEnegJiXswbTX+yaEoT4q47aBQ4/fATEDXFJkZiggmK7OsKk/wcVArWq81FvZCt4bqRAF1m+E5IL+JICzpSbC+7vF2XuGoaxwRFBA7+nRCEx1BsxiwTeHwxUZH3/F7nugPjU/q29t5F3wDvseK8Cx5Ci81coQhaj5+Qj2V9cAYOk4me8cgVzhy7dKCgZWI6WEU3dEajY1kWGLaCk7EUWRO6hu2eHvEWklLOfp3tVaGk+LfasGSBlgMF+Zop1Ws1i1CQaQ/dHrFOD08iIUVwBWLO+2FJqGmBEHu8nxyn2N8Sq7lX726fuKUwa+ZDBhNMxq5l3GXu+6un5RVh6O6iygvZm6EJhWYzWCudwocOx1bYYO2hlD3WfQX/RCuYswOqS98krTTiQ9+ftBUwSdZpZscsAQd9nDTD74ZluiuR25A5gqI6A5TDcjeN5HoEGIqOL7ezM7cage+oRrdRVMW0+2l+JGXCKPiLgJvZFqUGeZPmMTiTSeGS2+gh4wziE6Lw1mx7ATrwFoXpEl5QYXW7wZGv+rrMNVOsNT8PcQdQHjdDk91eBpFoUdQ9QaqRZK85fDaX+JLnOrk5s1Cqh0EVXEPNMldxR0uXEw7xp82b4041qalxKUnBg9bAsDZTLazmuBw6rSY=
  - secure: joF6wuFZASZb8rLBJdhJlUNlSDBdephDitL79d70ar8/zsVKaLjJ6bo5XjkwtZiDjbzSwvjCqjiBL5o0H713Vis+Z1B52GmkV4tkTFbg74wgiq03hDyFYwZ+z04aNyCOVV6tsKojWWC7fIZduLvB8UC9gEu6pQUCi72SV+XInQlybWb+YCb/D7bzbu2LgU66/g83drpojwgqy3giwrFhtT0i53DDBrIdzfbEPB/uwVCsuBDRnvvIIQEBogRtfUWI7tFPZXQcV9GUs4o5WJuCxxluCxTy9yYQYJG+/XZhgKWwfMeZjLXGL44DEKm9uHtF6a/1JSp6Vq5yzhaMbg+LC2ylwc8stAn00yvs/aYfuuIMl1uWO812CSrMnsMjJc+Pg5kRmutkf/DIYD+G3nxv+sNV233wNu2A/d3EUnHYO7/qkf+dYZhuBcChQriXy5bNbAEsnlDRfxLZ2huKLNbJoBy+MAMBSM0XujY0yEdd0OAnBDRn7crtHj1UD78Cy295uL/GMht8VTuITwpXwTHwUVMVRr1XYa3NKLopGkDsYiY2iLPEfKlx9sMGGUg7eJGkEB+IoOGhT2Jz/gKAY2mKOF4VQsW2MDamvR+qdhIltFC9wUjoZnPP4t94GZsR5fNDRnlX1FWFVfa5P3Tm3YEPNgtevvgm7Jepre8ZIT8ajzU=
  - secure: ZcXYGMrTl6/56YUMQ1g+BWUnOS7pIyDk4nQ5OpVHeDziAuTuC0tktN3jsnz1pZCQxLe3iL23ScVoe+1Kl0Wh7lenfkypJPkNJECufBxyCyjKTrAuWQFs+n/GbZxEXm+iyiQ/3k+VP0m7kRZFCs2yMAgYkvSf/TyZDtpHVE4qmM4AgLPExVYPpK8uZk2mIFJr28qQeHox0i/WkNL9RQ+iQDpoqSpW1tIz8vtR+UOvO6xJkrrwKt9FWg4lYv6OLq7kI97QZw5mYItZtxDHYnEKm8sO3/73wFGFEUaAaB9bfxmi1C8T1dbOt7IPrWg7V7Wvouu0Nj6a81jinp2wRuHfxzsMqsVvLgR/Kw/PWR/o3FPXVeXWdeUNC9ZW0v2/4k4Wyl+cKn7SeUpUkJFd6vASH/XvTWQHFSF/sLTU16eecKkZCeWcPK66ebuuK5gYjRDAaPDlKQ/8XD59QeiEe73xvvwmRmD47xSOG8bNcbcyzQ+wthNxfahIdLtCotxeCjee1ntYbLGXDnLv5pAf8LmMyNWfmi8fy35YxK4nbmIhk57aWCF/Igd8gI+RXWwMsrAXho8FBsnMmND5ap/DuM8dp+wwXDidw2i2idns13dKon5EL4HVkZvoE4ofDu16QBhNgVnbYaSQmiO5tkoud2oy6kTdvatjY+w0gM3Sx7LQOpg=
  - secure: qbdGpJP8BhoiQx7/q0pjh5s7lZNRFyIZC5GQ8jUVutJpyBYvdlej/5kgCZTipn/AQYUS4AI1jTQo+ZKIE+osQjX1c2YfH7hSV8otEqouQm6rKNnqltLekW3QZBL92LauLxuGDuk8yHT0pJ1XvQpxJZjO9tmzurXe97m7refx7wJKntaTZLD/qFSWaK2SUHBlVX9jL0yQ+CiNWrPaggMFDkvcsLXgbtkfIPvJuWmz8iQ6TG9VAnf1FBAwwiCkLluh8LcYmDDd4az+G2RtnMg4Qx2T77MdtDwDejR5oAF3xXdD5275ilI6aaHQF4C18geDUd8UtaKQ7gvMMHFSIq9suWE2o8hHaeHwPVTtl8L1MHr3kVW1kSdwnaWgpV1a5Ub4UtIv5YIJb0CdRyFIc7JEez9Qr2q+6+bhMNWMyawoJaL9c517kmFD5zEDR2NLe3q3oCLVvbd2ngFivoKsPcFrG5UH5PIfddg6yoj9DOD5syw7JJX0lPLT5QQQdiTWhPTXmHEEt5xnI2hNar+G+OuA/N8L6kaWvYH+Va7dPWsTClY88+CxtpXVI6bkDZ2y0Vxjl9FvOxv90s3THjpMTzBW+jRMqE4Uq4uydQzWwnUIzt/LaEvFqu0J1VT/vyDZPl/BMTBD/6i3tahE3JK9rwQsG9nGr+bsA9Kh373+iIJ2cGE=
  - secure: PH+w51fuJ9m3fwcbGSdX8FczhGBSKT8SFEda/qx94AhrV9eQ04ugE/zBpLFL5MTCuxPqZ6M52epoZCCzDgNde8htnY9stoE7yWLTm+DzCL4GmlBSIGeAqkPFiak2ZiXkY087yvy8MKTdD0bYi3IFRRCP2eC8r+L+cz9N1h/pSU4GV7JFdmX+ilJJkNnop02t7NtpkkhY0S2Dcti4/3yLdCEe6GgEYt59a9VHzOxeJDtveAFXPX2M8VhUu20CYRpKrO1f7mWNV1Id1nbKvKSzsnDjcOxzUM3y7mQZ92e8XiIxK5f9F5b0VS5rKEAu/lKoW01f9Hu5UZyT5G2NWbCRD1CRL3DPskEGt7OEw5l7koQmIYNo2azlMS4s+VH6EQe0nQ9+x0VZ7hwywwIguLgzPHPSeuZkMnEJtphSyV/qUIQl9WsDVugQhg9hgXiYTgMB199m7ZQb6pf7S53BAHkRGpbOMD0t0PIrNO0gr+LRINI0qsm9VOnNO0DLhYGTV6mojkUK5fjB6VoaDZ3Dz+FzqOUadOem2+Z1LG/+rzEVA4I8bIfyghnyhM3Il3l9SnHYSrTSbNR/5jHuLj/qZd8yVJV7lTVRcmHOuqBnmf6upKqMQvS3PkFm2R4l+5ICgyyhXM93+aAYq7RbrA6EIr+/ktdBDN4SV6AL9H8+hmbqxKU=
  - secure: EFDJFwq5ELM/1cu6ZNJLBiBC2po0yfr3QMXtHdQuGm2fP6j91P8Qp4/jTISw9qRVQGhuvBEEBqlqAQqM8oQGgLryN79GExM37SHTi1rYnvFe8LuXvGXV6lbykkL3BvEO1aOxBRFry9kda+dASPiQVLM+8C4b9FHpFwxLCw0pvIPjcE79mMnB/Rqr7Rl686vnkEa0fyaFA5NtVj2kBCLsLbSnsKgMRNdkiwBOdqH3g8lfNfC06luoiKKuQ5tyrU+6UKlYgQo2RW0xJlENlytTERZzq7g6DTydQZbNvUH7hSSjmlcsfzida3XGFGZPVaQlmhr9Z72eX9JrZ7c5fiHZLeEBkAEZWunjPE3S5ILc4pz2DKM9fQvdexBpkXnEuwiDXZbCaVm7YmSqp+SNZxkymfRMtD7c6JcKmEUFJ77UZ7R1vk7DNL5rqm36qLhcsAfgw0iWmpNtwhrfyUWbiq9iUbJDOw1rqWnd3hq7exOE1A3wzMi7btIL2dyl3g7AYneSs8RspQMYPVnjdsN6mnJQDNutSRlDJR5NL6/ZGRgdi8QWfAtK+Sb7ROXtlOhg6qTzf8p50l75FLWOnZmDfkvlVIjmZvC/+yOPhhvxv1ka7wPyfsxnP08WEqRH3elPKlu8hgV5Tc/508wLKlDpkN8ax0mDpGAU1sWjKxjSKpSlDnA=
  - secure: dgaq0zbf/zT1S1BdaOLpowDEqDXYxgm2O43APdprykFco6/NPFCB06Ll9IYKeFcSU0WCXHg82yewQKgS6Ez2YXIDigk+qZ7c8r0kWsweXDjto4BcogEdvqqIdAk+mLQA3k4TMzhCyLo5xOZUK6tgm5YJXPlgzPwkPZwvKCh/SZfECjerTDIF2QBVNsliGk0/o6ukNOzeLFnY9YC3XAPhor1YKj81sdqg+1WMzFa14JPCm7/EeLqB0JdUOoGYllYzBXTlKzBB/h9FtvEnQ6DyvxpZjcyWlli/m+f9tdZLM5iG8GV+bpVTpo0c6ZJubbu0m42Kdy1i65KevBQWNyUgDQvGDhyGy/vNn0u0RrxPGn4UiGiALDDaCoCZ5PuLvwCKMkF3+i9IMNh3Y9LdKup535DQhTsTS5F25BhM4Q4IJwfbgs+JuPJPgnMeHPOHuH0k2mGa7QDqPM9+zKaIVa4RMMLPNbGGqYEzOmZ6ohOtlWnFKjuQGQQnLm87ci6Cck2vgo3yoTspljzQ+ApRqgX5K+NAV4gFTypFhlqPWHMdXqXoI1qJD//TKCDjQ2A+qopqsz9Lu+IuOjGvoSBLDAo1ovQiLKfCVX0huuN7e7VqV9nfVRG+OELX0C9AFK+FFA0U+PqSZdlxl5SIgip450CSg4IJBMKmOWN1bGk+uN4lhJ8=
  - secure: S4KA6OorjQq/yQeXejZdTpCHOqySFI/SOznWfMeMvIKgD7jQ3og/T1FKqkhLrv1uUBxu3bLKk8tdWDCbfpbQAMrqaS42WhRqJ3b4LgzxH4O4yhgWGrvOE7fJISbbu/hSkpUEyfpDqbu7j99oj3QQY+rfGZA2EdU3ZD1+9E2L9c2S9kXTwvrMSFfTIsf2ejFmL+yfATa3JcgrLL9z4aYCNMYfFY+R+JQEEpEY+tnPGCFW0LN5OJPZ00TZ2cFRNCwJmk0hPYE0VenOlL/JcQQ1jpkH8iOfM0c+BV4cnxqXE15o5L9cwZw6yqj5cnQ2iKpFPqeHWVDgtPisaCB4ErpKFy6iFhFwECLtNWaT3n1mXKnHIRJrzENbHKtWTjG+kGrfQSY6J3Thz23ilqSRiCMw2q/LGFY2zjQb0sQuN/KiEM/ydDKyBKthclIUaUJ7qJ9NduYha3t8AeOLaf2vxB3yQh1KmF8TaeClfrQ5nboGejfeg2xMAh+mgrXWby9tQNB+fYDE0Wpv+UIrLLHP1aQcxEm1CgosC69gwLAwZ9zNZkDEyMm6Ef/C/Y0RpqJlv2xn5CCim6Rbt2VLxwwhTPTSWAhXNcggZIlORvBg8eSl9UfK/mx+kRqcKIoASa7MKUzuMoT1KUMmuSlJEnAmNzIIGBLDaOLU6rl8QxCbSJQFhKI=
  - secure: E18KT8Et7KABuH8qJhSzjI7U6QpsaKG89R5b+sP9gW36jFbGfXYODIpiKCWSQoj4STBAzWEJ8Q56gP0po1IsMVO5EfVM54U1XuyA3nWpBoOxa4fsRXmok86CLlA74M2jHO0ixya+OQni9Z1yFxei3Gxv/Bj/cs7vv0MTCVhchhxXJf9k5p3OjN8ukRcPixnSfoZha4TngvsBNXf+JTDzyAa1WtuyzYt8S3F4c9TK/HZaobTHRcq0wtuKR22VjUJnxTGTQ8PIemNsqN0EhAtw12m4UpppJ0cR17yhqrtne0TijIiuEFISpSu8S10QxxY1RVONU+0h6y/FTWClCA3xDBFadlRJQn+ja2cuy7GkJSXw31P4EF/P/pfvh+pGHDY9jUBwrMiD9HS7ugNftNuc5sp4pMP6u/k2OgeIdJxrW7zmXTYsn0FRgkFfo59ICSsKvhNxsP0eLic14M7TiVVrV61JcPwlVbjUZfO2SZeh6Ju+kO/o5towkzFrbVJS2lC54DWpRJEhkoK3xMNWgxoiZrK2Uqw8HU56TaAgVwN6Z0ydOLXMZhItb6761BiKg1PRZucdrsM4PbFKF4FmeSqMc0Ge/e4DvCUfWLBEqfXR4/qOPrK31NTspkNwJqN7htAjaLbc5jEHQdwB0WXP+GpJMM+LE7x4DkDMiQ1KglR6DVo=
  - secure: WJap0e12jaGDx5evM/XKWMttlArrZAKCJR4QT7KAYCWJwNCeUtdDU0VVh5MMenGPIYcwvbyNlZudvdtSdTZF/5JNJeg1lkHcr7q2w998flw4YnxJ6Dds4IYto28fJzxtQuOxSfAkUICGfzBouO4/tL8o+g9ckkkk5i68CVvejv5V9rAYIrFaSgxH5F9F3NxxG3CKkCBewN4q3hwYPibTeBCpzgBvLicMQgTwOfkriMk+4ce38b3akymOC6aj0YOMUEN+C8qZASi1suXMnuU0u+My1QIo/0mAdRx/3sJJLTLnJrNpfoI7xIr1gECJuOyaE8i0/K5b2ahQHai3gNwZkcl/BlsjZ1otF7eSx+WocMdE+//ED8lLnJ+kbiiwFDG4AF4q5MDi4GAGcSTgcCc3oszFGOolXrMgm5iqxsSo9hsgsbyhSR1vUrjtmNRZo/nTmD/V+jlN8QbipSioYgIodSKckldcaCK3yVHmvb5FlqsR2+g7UKhII4e74yBeCxHBeXQwwIJSMcCf0f+wWVmDTTP0NkCGjjdMFVWXoinHKz/E09OWJCR67EDtrgRU9neNooC6zn80DimRbEfrtCV/vJlzkhdLxj+bAlEIFBQiVvCuCVWAKMLgdUOXFyGE9YE7+jupWVNHb9k9uSBjdIt4bLdQlFgHGbu80iJ8AHT9ywU=
  - secure: fNT+VVlPMTyQ/8uMkvBchnNkWJVDAe5AGwqJf7M+NWY9QFbuZlkqUwunXPeN9A4vqbG0sTU6GNgCxCX687YXo+3gcKZJ/C0OHPYK5N9FuZFctA8JGQRzrbdX7R6tawsl+jCpnbCPAqk+3jchFv87Qt5wAWJ6+mVP54vluAGnOWzJWMbCuEhMubXs9Su08a4/kWFmBp76/6sOw9JUNxUMlpcvbFVwsSDxuAMeaT1FwARUyu4W+hy4zHKIM913V3RStpcy10IYxJAfP0DGDMX5Tr0EyeyTvxBAVqv9WzBj7yPAkx3XIx2M9UKcXShWEZ6ALUMvzmNE+Xx04HyM6GQD+c9v29a3F7xp+yMVuc5tP1sS9NHGMyqJ/XllT0MHcAuGXXmNsKpDO7K5EMRv8CF608RPqp8xUhgUmrVIGwz4JAIrh1dleKtmCoKzesPwlhnjWl/ON6KNCye4CpD3SUtP4Nw3opi39HZ5hluB1vas/vYSIoqqt8vy3FJK3DLOC9lMnooMckcj/e5nz1ehC9FXGs8XCrsP6r2OvKDkXJ5nV+50m9aBxZly3h3bF+lv5IAJHI7kmCcEwFDBflOLDwyCj/AzeZjmMQ1Udr0k5npdZ8xq8FEjyrAgUs7dSAfg2oEeAAOiPK9NkL76AwZhqKKHysmKDVf7QAYSLsyLl4VHjaM=
