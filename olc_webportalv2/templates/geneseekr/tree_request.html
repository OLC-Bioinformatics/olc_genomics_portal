{% extends "base.html" %}
{#Head container#}
{% load staticfiles %}
{% load bootstrap %}
{% load crispy_forms_tags %}
{% load i18n widget_tweaks %}
{% block content %}
  <h2>Tree Query</h2>
  <form action='' enctype="multipart/form-data" method="post">
   {% if form.errors %}
     <div class="alert alert-danger" role="alert" align="center">
     {{ form.non_field_errors|escape }}
    </div>
   {% endif %}
  {% csrf_token %}
   <div class="col-3" style="padding-left:0;">
      {{form.name|as_crispy_field }}
      </div>
      <p>Enter SeqIDs to use to build your tree:</p>
      {{ form.seqids|as_crispy_field }}
      {{ form.other_files|as_crispy_field }}
      {{form.tree_program|as_crispy_field }}

      <div class="col-3" style="padding-left:0;">
      {{form.number_diversitree_strains|as_crispy_field }}
      </div>
    
  <button type="submit" class="btn btn-primary btn-lg">Create Tree</button>
  </form>

<script src="{% static 'js/jquery-3.3.1.min.js' %}"></script>
  <script type="text/javascript">
  $(document).ready(function () {
  // adds tool tips 
  var tree_options = document.getElementsByClassName('form-check');
  $(tree_options[0]).attr('data-tooltip','tooltip');
  $(tree_options[0]).attr('title','Mashtree makes trees very quickly, but won\'t provide very good resolution on ' +
    'closely related strains.');
  $(tree_options[1]).attr('data-tooltip','tooltip');
  $(tree_options[1]).attr('title', 'Parsnp is slower than mashtree but more capable of discriminating between closely ' +
    'related strains. It does not work if your strains are not closely related (keep it to the same species!)');

  var diversitree = document.getElementById('div_id_number_diversitree_strains');
  $(diversitree).attr('data-tooltip','tooltip');
  $(diversitree).attr('title', 'If you want to choose a subset of strains that contain the most phylogenetic diversity ' +
    'possible, enter the number of strains you want chosen here.');

  var seqids = document.getElementById('div_id_seqids');
  $(seqids).attr('data-tooltip','tooltip');
  $(seqids).attr('title', 'Enter SeqIDs you want to build a tree from here, one per line.');

  });
  </script>
{% endblock %}
